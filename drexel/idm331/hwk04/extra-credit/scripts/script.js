!function(){let e,n,t,i,o,a,c,s,d,r=new THREE.Clock,l=!1,w=new THREE.Raycaster,h=document.getElementById("js-loader");function m(n,i=!1){var o={};i?(o.x=n.changedTouches[0].clientX/window.innerWidth*2-1,o.y=1-n.changedTouches[0].clientY/window.innerHeight*2):(o.x=n.clientX/window.innerWidth*2-1,o.y=1-n.clientY/window.innerHeight*2),w.setFromCamera(o,t);var a=w.intersectObjects(e.children,!0);a[0]&&("stacy"===a[0].object.name&&(l||(l=!0,function(){let e=Math.floor(Math.random()*c.length)+0;E(d,.25,c[e],.25)}())))}function E(e,n,t,i){t.setLoop(THREE.LoopOnce),t.reset(),t.play(),e.crossFadeTo(t,n,!0),setTimeout(function(){e.enabled=!0,t.crossFadeTo(e,i,!0),l=!1},1e3*t._clip.duration-1e3*(i+n))}function p(e,n,t){let i=function(e,n,t){let i,o,a,c,s=0,d=0,r={x:window.innerWidth,y:window.innerHeight};e<=r.x/2&&(i=r.x/2-e,o=i/(r.x/2)*100,s=t*o/100*-1);e>=r.x/2&&(i=e-r.x/2,o=i/(r.x/2)*100,s=t*o/100);n<=r.y/2&&(a=r.y/2-n,c=a/(r.y/2)*100,d=.5*t*c/100*-1);n>=r.y/2&&(a=n-r.y/2,c=a/(r.y/2)*100,d=t*c/100);return{x:s,y:d}}(e.x,e.y,t);n.rotation.y=THREE.Math.degToRad(i.x),n.rotation.x=THREE.Math.degToRad(i.y)}!function(){const r=document.querySelector("#c"),l=15856113;e=new THREE.Scene,e.background=new THREE.Color(l),e.fog=new THREE.Fog(l,60,100),n=new THREE.WebGLRenderer({canvas:r,antialias:!0}),n.shadowMap.enabled=!0,n.setPixelRatio(window.devicePixelRatio),document.body.appendChild(n.domElement),t=new THREE.PerspectiveCamera(50,window.innerWidth/window.innerHeight,.1,1e3),t.position.z=30,t.position.x=0,t.position.y=-3;let w=(new THREE.TextureLoader).load("https://s3-us-west-2.amazonaws.com/s.cdpn.io/1376484/stacy.jpg");w.flipY=!1;const m=new THREE.MeshPhongMaterial({map:w,color:16777215,skinning:!0});(new THREE.GLTFLoader).load("https://s3-us-west-2.amazonaws.com/s.cdpn.io/1376484/stacy_lightweight.glb",function(n){i=n.scene;let t=n.animations;i.traverse(e=>{e.isMesh&&(e.castShadow=!0,e.receiveShadow=!0,e.material=m),e.isBone&&"mixamorigNeck"===e.name&&(o=e),e.isBone&&"mixamorigSpine"===e.name&&(a=e)}),i.scale.set(7,7,7),i.position.y=-11,e.add(i),h.remove(),s=new THREE.AnimationMixer(i);let r=t.filter(e=>"idle"!==e.name);c=r.map(e=>{let n=THREE.AnimationClip.findByName(r,e.name);return n.tracks.splice(3,3),n.tracks.splice(9,3),n=s.clipAction(n),n}),console.log(c),c.forEach(e=>{const n=document.createElement("button");n.addEventListener("click",()=>{E(d,.25,e,.25)}),n.innerText=e._clip.name.toUpperCase(),n.classList.add("my-buttons"),document.querySelector(".frame__links").appendChild(n)});let l=THREE.AnimationClip.findByName(t,"idle");l.tracks.splice(3,3),l.tracks.splice(9,3),d=s.clipAction(l),d.play()},void 0,function(e){console.error(e)});let p=new THREE.HemisphereLight(16777215,16777215,.61);p.position.set(0,50,0),e.add(p);let u=8.25,T=new THREE.DirectionalLight(16777215,.54);T.position.set(-8,12,8),T.castShadow=!0,T.shadow.mapSize=new THREE.Vector2(1024,1024),T.shadow.camera.near=.1,T.shadow.camera.far=1500,T.shadow.camera.left=-1*u,T.shadow.camera.right=u,T.shadow.camera.top=u,T.shadow.camera.bottom=-1*u,e.add(T);let y=new THREE.PlaneGeometry(5e3,5e3,1,1),R=new THREE.MeshPhongMaterial({color:15658734,shininess:0}),H=new THREE.Mesh(y,R);H.rotation.x=-.5*Math.PI,H.receiveShadow=!0,H.position.y=-11,e.add(H);let g=new THREE.SphereGeometry(8,32,32),x=new THREE.MeshBasicMaterial({color:10223535}),f=new THREE.Mesh(g,x);f.position.z=-15,f.position.y=-2.5,f.position.x=-.25,e.add(f)}(),function i(){if(s&&s.update(r.getDelta()),function(e){const n=e.domElement;let t=window.innerWidth,i=window.innerHeight,o=n.width/window.devicePixelRatio,a=n.height/window.devicePixelRatio;const c=o!==t||a!==i;c&&e.setSize(t,i,!1);return c}(n)){const e=n.domElement;t.aspect=e.clientWidth/e.clientHeight,t.updateProjectionMatrix()}n.render(e,t),requestAnimationFrame(i)}(),window.addEventListener("click",e=>m(e)),window.addEventListener("touchend",e=>m(e,!0)),document.addEventListener("mousemove",function(e){var n=function(e){return{x:e.clientX,y:e.clientY}}(e);o&&a&&(p(n,o,50),p(n,a,30))})}();